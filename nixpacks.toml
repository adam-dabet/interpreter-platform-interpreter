# Nixpacks Configuration for Railway - React Frontend
# Explicitly disable static site detection and Caddy

[providers]
node = "20"

[staticAssets]
# Explicitly disable static site serving
outputDir = ""

[phases.setup]
nixPkgs = ["nodejs_20"]
aptPkgs = []

[phases.install]
cmds = ["npm ci --legacy-peer-deps || npm install --legacy-peer-deps"]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "node server.js"

[variables]
NODE_ENV = "production"
RAILWAY_STATIC = "false"
REACT_APP_API_URL = "https://backend.theintegritycompanyinc.com/api"

